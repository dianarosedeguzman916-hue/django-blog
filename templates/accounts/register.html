{% extends "base.html" %}
{% load static %}

{% block title %}Sign up | Netflix Blog{% endblock %}

{% block content %}

<style>
/* =========================
   AUTH PAGE
========================= */
.auth-page {
    min-height: 100vh;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    padding: 20px 15px;
}

.auth-backdrop {
    position: absolute;
    inset: 0;
    background:
        linear-gradient(rgba(0,0,0,.7), rgba(0,0,0,.7)),
        url("{% static 'images/netflix-bg.jpg' %}") center/cover no-repeat;
}

/* =========================
   CARD
========================= */
.auth-card {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: 380px;
    background: #000;
    padding: 45px 30px;
    border-radius: 8px;
    color: #fff;
    text-align: center;
}

/* Netflix Logo */
.netflix-logo {
    width: 150px;
    height: 45px;
    margin: 0 auto 30px;
    background: url("https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png") center/contain no-repeat;
    background-size: contain;
}

.auth-card h1 {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 30px;
}

/* =========================
   FORM
========================= */
.form-group {
    position: relative;
    margin-bottom: 25px;
    border-bottom: 1px solid #aaa;
}

.form-group input {
    width: 100%;
    padding: 10px 0;
    background: transparent;
    border: none;
    outline: none;
    color: #fff;
    font-size: 16px;
}

.form-group label {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    color: #aaa;
    font-size: 16px;
    pointer-events: none;
    transition: all 0.2s ease;
}

.form-group input:focus + label,
.form-group input:not(:placeholder-shown) + label,
.form-group input:not(:value-empty) + label {
    top: -8px;
    font-size: 12px;
    color: #fff;
}

/* Password toggle button */
.toggle-pwd {
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    color: #aaa;
    padding: 0;
}

.toggle-pwd svg {
    width: 22px;
    height: 22px;
}

/* =========================
   BUTTON
========================= */
.btn-primary {
    width: 100%;
    padding: 12px;
    margin-top: 15px;
    background: #e50914;
    border: none;
    border-radius: 4px;
    color: #fff;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.2s ease;
}

.btn-primary:hover {
    background: #c11119;
}

/* =========================
   FOOTER LINK
========================= */
.auth-login {
    margin-top: 25px;
    text-align: center;
    font-size: 14px;
    color: #aaa;
}

.auth-login a {
    color: #fff;
    text-decoration: none;
    font-weight: 500;
}

.auth-login a:hover {
    text-decoration: underline;
}

/* =========================
   ERROR MESSAGE
========================= */
.field-error {
    font-size: 13px;
    color: #e50914;
    margin-top: 5px;
    display: block;
}
</style>

<section class="auth-page">
    <div class="auth-backdrop"></div>

    <div class="auth-card">
        <!-- Netflix Logo -->
        <div class="netflix-logo"></div>

        <h1>Sign up</h1>

        <form method="POST" novalidate>
            {% csrf_token %}

            <!-- USERNAME -->
            <div class="form-group">
                <input type="text" name="username" id="id_username" value="{{ form.username.value|default:'' }}" required placeholder=" ">
                <label for="id_username">Username</label>
                {% if form.username.errors %}
                    <span class="field-error">{{ form.username.errors.0 }}</span>
                {% endif %}
            </div>

            <!-- EMAIL -->
            <div class="form-group">
                <input type="email" name="email" id="id_email" value="{{ form.email.value|default:'' }}" required placeholder=" ">
                <label for="id_email">Email Address</label>
                {% if form.email.errors %}
                    <span class="field-error">{{ form.email.errors.0 }}</span>
                {% endif %}
            </div>

            <!-- PASSWORD -->
            <div class="form-group">
                <input type="password" name="password1" id="id_password1" required placeholder=" ">
                <label for="id_password1">Password</label>
                <button type="button" class="toggle-pwd" onclick="togglePwd('id_password1', 'eye1')">
                    <!-- Eye SVGs -->
                    <svg id="eye1-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
                        <circle cx="12" cy="12" r="2.5"/>
                    </svg>
                    <svg id="eye1-closed" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
                        <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12zm10-5a5 5 0 0 0 0 10 5 5 0 0 0 0-10z"/>
                        <line x1="2" y1="2" x2="22" y2="22" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                {% if form.password1.errors %}
                    <span class="field-error">{{ form.password1.errors.0 }}</span>
                {% endif %}
            </div>

            <!-- CONFIRM PASSWORD -->
            <div class="form-group">
                <input type="password" name="password2" id="id_password2" required placeholder=" ">
                <label for="id_password2">Confirm Password</label>
                <button type="button" class="toggle-pwd" onclick="togglePwd('id_password2', 'eye2')">
                    <!-- Eye SVGs -->
                    <svg id="eye2-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
                        <circle cx="12" cy="12" r="2.5"/>
                    </svg>
                    <svg id="eye2-closed" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
                        <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12zm10-5a5 5 0 0 0 0 10 5 5 0 0 0 0-10z"/>
                        <line x1="2" y1="2" x2="22" y2="22" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                {% if form.password2.errors %}
                    <span class="field-error">{{ form.password2.errors.0 }}</span>
                {% endif %}
            </div>

            <button type="submit" class="btn-primary">Sign Up</button>
        </form>

        <div class="auth-login">
            Already have an account? <a href="{% url 'accounts:login' %}">Log in.</a>
        </div>
    </div>
</section>

<script>
// Toggle password visibility with eye SVGs
function togglePwd(inputId, eyeId) {
    const input = document.getElementById(inputId);
    const eyeOpen = document.getElementById(eyeId + '-open');
    const eyeClosed = document.getElementById(eyeId + '-closed');

    if (input.type === 'password') {
        input.type = 'text';
        eyeOpen.style.display = 'none';
        eyeClosed.style.display = 'inline';
    } else {
        input.type = 'password';
        eyeOpen.style.display = 'inline';
        eyeClosed.style.display = 'none';
    }
}
</script>

{% endblock %}
